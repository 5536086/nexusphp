var A=Object.defineProperty,B=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var U=(a,t,e)=>t in a?A(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,T=(a,t)=>{for(var e in t||(t={}))R.call(t,e)&&U(a,e,t[e]);if(S)for(var e of S(t))j.call(t,e)&&U(a,e,t[e]);return a},E=(a,t)=>B(a,P(t));import{B as z,u as N,r as F,o as I,t as L,e as u,y as M,f as _,q as D,w as d,E as x,h as f,k as l,g as Q,A as G,F as H,z as J,l as k}from"./vendor.51c5b88d.js";import{_ as K,a as v}from"./index.fe225b34.js";import{u as O,r as W,a as X}from"./table.37673c89.js";const Y={name:"UserTable",setup(){const a=z(null),t=N(),e=O();let s=F({classes:[]});I(()=>{v.listClass().then(function(o){s.classes=o.data}),c()});const c=async()=>{e.loading=!0;let o=await v.listUser(e.query);W(o,e),e.loading=!1},V=()=>{t.push({name:"user-form"})},m=o=>{t.push({name:"user-form",query:{id:o}})},i=async o=>{let n=await v.deleteExam(o);x.success(n.msg),e.query.page=1,await c()},h=o=>{e.multipleSelection=o},b=o=>{e.query.page=o,c()},p=o=>{X(o,e),c()},g=()=>{e.query.id="",e.query.username="",e.query.email="",e.query.class="",e.query.sort_field="",e.query.sort_type=""},r=o=>{t.push({name:"user-detail",query:{id:o}})},y=(o,n)=>o.class_text,C=(o,n)=>o.uploaded_text,q=(o,n)=>o.downloaded_text;return E(T({},L(e)),{multipleTable:a,extraData:s,handleSelectionChange:h,handleAdd:V,handleEdit:m,handleDelete:i,handleDetail:r,fetchTableData:c,changePage:b,handleSortChange:p,formatColumnClass:y,formatColumnUploaded:C,formatColumnDownloaded:q,handleReset:g})}},Z={class:"nexus-table-header"},$={class:"left"},ee=k("Query"),le=k("Reset"),ae={class:"right"},te=k("Add"),oe=["onClick"];function ne(a,t,e,s,c,V){const m=u("el-input"),i=u("el-form-item"),h=u("el-option"),b=u("el-select"),p=u("el-button"),g=u("el-form"),r=u("el-table-column"),y=u("el-table"),C=u("el-pagination"),q=u("el-card"),o=M("loading");return _(),D(q,null,{header:d(()=>[f("div",Z,[f("div",$,[l(g,{inline:!0,model:a.query},{default:d(()=>[l(i,{label:""},{default:d(()=>[l(m,{placeholder:"ID",modelValue:a.query.id,"onUpdate:modelValue":t[0]||(t[0]=n=>a.query.id=n)},null,8,["modelValue"])]),_:1}),l(i,{label:""},{default:d(()=>[l(m,{placeholder:"Username",modelValue:a.query.username,"onUpdate:modelValue":t[1]||(t[1]=n=>a.query.username=n)},null,8,["modelValue"])]),_:1}),l(i,{label:""},{default:d(()=>[l(m,{placeholder:"Email",modelValue:a.query.email,"onUpdate:modelValue":t[2]||(t[2]=n=>a.query.email=n)},null,8,["modelValue"])]),_:1}),l(i,{label:""},{default:d(()=>[l(b,{modelValue:a.query.class,"onUpdate:modelValue":t[3]||(t[3]=n=>a.query.class=n),filterable:"",placeholder:"Class"},{default:d(()=>[(_(!0),Q(H,null,G(s.extraData.classes,(n,w)=>(_(),D(h,{key:w,label:n,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,null,{default:d(()=>[l(p,{type:"primary",onClick:s.fetchTableData},{default:d(()=>[ee]),_:1},8,["onClick"]),l(p,{type:"primary",onClick:s.handleReset},{default:d(()=>[le]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),f("div",ae,[l(p,{type:"primary",icon:"Plus",onClick:s.handleAdd},{default:d(()=>[te]),_:1},8,["onClick"])])])]),default:d(()=>[J((_(),D(y,{ref:"multipleTable",data:a.tableData,"tooltip-effect":"dark",onSortChange:s.handleSortChange,onSelectionChange:s.handleSelectionChange},{default:d(()=>[l(r,{type:"selection",width:"55"}),l(r,{prop:"id",label:"Id",width:"80",sortable:"custom"}),l(r,{prop:"username",label:"Username",sortable:"custom"}),l(r,{prop:"email",label:"Email",width:"200"}),l(r,{prop:"class",label:"Class",sortable:"custom",width:"120",formatter:s.formatColumnClass},null,8,["formatter"]),l(r,{prop:"uploaded",label:"Uploaded",sortable:"custom",formatter:s.formatColumnUploaded},null,8,["formatter"]),l(r,{prop:"downloaded",label:"Downloaded",sortable:"custom",formatter:s.formatColumnDownloaded},null,8,["formatter"]),l(r,{prop:"bonus",label:"Bonus"}),l(r,{prop:"status",label:"Status",width:"100"}),l(r,{prop:"enabled",label:"Enabled",width:"100"}),l(r,{prop:"last_access",label:"Last access",width:"150"}),l(r,{prop:"added",label:"Added",width:"150"}),l(r,{label:"Action",width:"100"},{default:d(n=>[f("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:w=>s.handleDetail(n.row.id)},"Detail",8,oe)]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[o,a.loading]]),l(C,{background:"",layout:"prev, pager, next",total:a.total,"page-size":a.perPage,"current-page":a.currentPage,onCurrentChange:s.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var ie=K(Y,[["render",ne]]);export{ie as default};
