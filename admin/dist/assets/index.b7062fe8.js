var x=Object.defineProperty,B=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var S=(t,l,o)=>l in t?x(t,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[l]=o,T=(t,l)=>{for(var o in l||(l={}))I.call(l,o)&&S(t,o,l[o]);if(V)for(var o of V(l))P.call(l,o)&&S(t,o,l[o]);return t},U=(t,l)=>B(t,H(l));import{B as j,u as M,r as z,o as E,t as N,e as d,y as A,f as _,q as v,w as r,E as F,h as f,k as a,g as L,A as Q,F as G,z as J,j as K,l as R}from"./vendor.7b1bb722.js";import{_ as O,a as D}from"./index.bd08f3f5.js";import{u as W,r as X}from"./table.77a09864.js";const Y={name:"HrTable",setup(){const t=j(null),l=M(),o=W();let s=z({status:[]});E(()=>{console.log("MedalTable onMounted"),m()});const m=async()=>{o.loading=!0,await p();let e=await D.listHr(o.query);X(e,o),o.loading=!1},k=()=>{l.push({name:"agent-deny-form"})},h=e=>{l.push({path:"/hr-detail",query:{id:e}})},b=async e=>{let i=await D.deleteHr(e);F.success(i.msg),o.query.page=1,await m()},u=e=>{o.multipleSelection=e},c=e=>{o.query.page=e,m()},p=async()=>{let e=await D.listHrStatus();s.status=e.data},g=()=>{o.query.status="",o.query.uid="",o.query.username="",o.query.torrent_id=""},n=(e,i)=>e.user.username,y=(e,i)=>'<a href="" target="_blank">'+e.torrent.name+"</a>",w=(e,i)=>e.snatch.upload_text,C=(e,i)=>e.snatch.download_text,q=(e,i)=>e.snatch.share_ratio;return U(T({},N(o)),{extraData:s,multipleTable:t,handleSelectionChange:u,handlePardon:k,handleDetail:h,handleDelete:b,fetchTableData:m,changePage:c,handleReset:g,formatColumnUsername:n,formatColumnTorrent:y,formatColumnUploaded:w,formatColumnDownloaded:C,formatColumnShareRatio:q})}},Z={class:"nexus-table-header"},$={class:"left"},ee=R("Query"),te=R("Reset"),ae=["title","href"],le=["onClick"];function oe(t,l,o,s,m,k){const h=d("el-option"),b=d("el-select"),u=d("el-form-item"),c=d("el-input"),p=d("el-button"),g=d("el-form"),n=d("el-table-column"),y=d("el-table"),w=d("el-pagination"),C=d("el-card"),q=A("loading");return _(),v(C,{class:""},{header:r(()=>[f("div",Z,[f("div",$,[a(g,{inline:!0,model:t.query},{default:r(()=>[a(u,{label:""},{default:r(()=>[a(b,{modelValue:t.query.status,"onUpdate:modelValue":l[0]||(l[0]=e=>t.query.status=e),filterable:"",placeholder:"Status"},{default:r(()=>[(_(!0),L(G,null,Q(s.extraData.status,e=>(_(),v(h,{key:e.status,label:e.text,value:e.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:""},{default:r(()=>[a(c,{placeholder:"UID",modelValue:t.query.uid,"onUpdate:modelValue":l[1]||(l[1]=e=>t.query.uid=e)},null,8,["modelValue"])]),_:1}),a(u,{label:""},{default:r(()=>[a(c,{placeholder:"Username",modelValue:t.query.username,"onUpdate:modelValue":l[2]||(l[2]=e=>t.query.username=e)},null,8,["modelValue"])]),_:1}),a(u,{label:""},{default:r(()=>[a(c,{placeholder:"Torrent ID",modelValue:t.query.torrent_id,"onUpdate:modelValue":l[3]||(l[3]=e=>t.query.torrent_id=e)},null,8,["modelValue"])]),_:1}),a(u,null,{default:r(()=>[a(p,{type:"primary",onClick:s.fetchTableData},{default:r(()=>[ee]),_:1},8,["onClick"]),a(p,{type:"primary",onClick:s.handleReset},{default:r(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])])])]),default:r(()=>[J((_(),v(y,{ref:"multipleTable",data:t.tableData,"tooltip-effect":"dark",onSelectionChange:s.handleSelectionChange},{default:r(()=>[a(n,{type:"selection",width:"55"}),a(n,{prop:"id",label:"Id",width:"50"}),a(n,{prop:"",label:"Username",formatter:s.formatColumnUsername},null,8,["formatter"]),a(n,{prop:"",label:"Torrent",width:"300"},{default:r(e=>[f("a",{class:"text-one-line",title:e.row.torrent.name,href:e.row.torrent.details_url,target:"_blank"},K(e.row.torrent.name),9,ae)]),_:1}),a(n,{prop:"",label:"Uploaded",width:"160",formatter:s.formatColumnUploaded},null,8,["formatter"]),a(n,{prop:"",label:"Downloaded",width:"160",formatter:s.formatColumnDownloaded},null,8,["formatter"]),a(n,{prop:"",label:"Share ratio",width:"120",formatter:s.formatColumnShareRatio},null,8,["formatter"]),a(n,{prop:"seed_time_required",label:"Seed time required",width:"160"}),a(n,{prop:"inspect_time_left",label:"Inspect time left",width:"160"}),a(n,{prop:"status_text",label:"Status",width:"70"}),a(n,{prop:"created_at",label:"Created at",width:"160"}),a(n,{label:"Action",width:"120"},{default:r(e=>[f("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:i=>s.handleDetail(e.row.id)},"Detail",8,le)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[q,t.loading]]),a(w,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.perPage,"current-page":t.currentPage,onCurrentChange:s.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var ue=O(Y,[["render",oe],["__scopeId","data-v-5034fc34"]]);export{ue as default};
