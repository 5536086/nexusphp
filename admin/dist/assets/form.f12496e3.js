var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,d=(e,d)=>{for(var s in d||(d={}))a.call(d,s)&&r(e,s,d[s]);if(t)for(var s of t(d))l.call(d,s)&&r(e,s,d[s]);return e};import{k as s,r as o,A as n,o as i,a as m,s as u,t as f,v as p,x as c,u as g,q as _,p as D,m as b,b as V,d as y,e as Y,f as h,F as x,i as v,g as U,h as j,z as H,j as M}from"./index.a0f02932.js";const k={name:"ExamForm",setup(){const{proxy:e}=p();console.log("proxy",e);const a=s(null),t=c(),l=g(),{id:r}=t.query,D=o({token:n("token")||"",id:r,allClasses:[],formData:{name:"",description:"",begin:"",end:"",duration:"",indexes:[],filters:{classes:[],register_time_range:[]},status:"",is_discovered:""},rules:{name:[{required:"true"}],indexes:[{required:"true"}],status:[{required:"true"}],is_discovered:[{required:"true"}]}});i((async()=>{await b(),await V(),r&&m.getExam(r).then((e=>{D.formData.name=e.data.name,D.formData.description=e.data.description,D.formData.begin=e.data.begin,D.formData.end=e.data.end,D.formData.duration=e.data.duration,D.formData.indexes=e.data.indexes,D.formData.filters=e.data.filters,D.formData.status=e.data.status,D.formData.is_discovered=e.data.is_discovered}))})),u((()=>{}));const b=async()=>{let e=await m.listClass();D.allClasses=e.data},V=async()=>{let e=await m.listExamIndex();D.formData.indexes=e.data};return d(d({},f(D)),{formRef:a,submitAdd:()=>{a.value.validate((async e=>{if(e){let e=D.formData;e.begin&&(e.begin=dayjs(e.begin).format("YYYY-MM-DD HH:mm:ss")),e.end&&(e.end=dayjs(e.end).format("YYYY-MM-DD HH:mm:ss")),e.filters.register_time_range[0]&&(e.filters.register_time_range[0]=dayjs(e.filters.register_time_range[0]).format("YYYY-MM-DD HH:mm:ss")),e.filters.register_time_range[1]&&(e.filters.register_time_range[1]=dayjs(e.filters.register_time_range[1]).format("YYYY-MM-DD HH:mm:ss")),console.log(e),r?await m.updateExam(r,e):await m.storeExam(e),await l.push({name:"exam"})}}))},handleBeforeUpload:e=>{const a=e.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(a))return _.error("请上传 jpg、jpeg、png 格式的图片"),!1},handleUrlSuccess:e=>{D.formData.goodsCoverImg=e.data||""},handleChangeCate:e=>{D.categoryId=e[2]||0}})}},w=M();D("data-v-f652630a");const E=U("Enabled"),C=U("Disabled"),q=U("No"),O=U("Yes"),I=h("div",{style:{color:"#aaa"}},"Unit: days. When assign to user, begin and end are used if they are specified. Otherwise begin time is the time at assignment, and the end time is the time at assignment plus the duration.",-1),S=U("Submit");b();const T=w(((e,a,t,l,r,d)=>{const s=V("el-input"),o=V("el-form-item"),n=V("el-checkbox"),i=V("el-col"),m=V("el-row"),u=V("el-radio"),f=V("el-radio-group"),p=V("el-date-picker"),c=V("el-checkbox-group"),g=V("el-button"),_=V("el-form");return y(),Y("div",null,[h(m,null,{default:w((()=>[h(i,{span:12},{default:w((()=>[h(_,{model:e.formData,rules:e.rules,ref:"formRef","label-width":"200px",class:"formData"},{default:w((()=>[h(o,{label:"Name",prop:"name"},{default:w((()=>[h(s,{modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),placeholder:""},null,8,["modelValue"])])),_:1}),h(o,{label:"Index",prop:"indexes"},{default:w((()=>[(y(!0),Y(x,null,v(e.formData.indexes,((e,a)=>(y(),Y(m,{key:a},{default:w((()=>[h(i,{span:6},{default:w((()=>[h(n,{modelValue:e.checked,"onUpdate:modelValue":a=>e.checked=a,label:e.checked},{default:w((()=>[U(j(e.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","label"])])),_:2},1024),h(i,{span:12},{default:w((()=>[h(s,{type:"number",modelValue:e.require_value,"onUpdate:modelValue":a=>e.require_value=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),h(i,{span:6,style:{padding:"0 20px",color:"#aaa"}},{default:w((()=>[e.unit?(y(),Y(x,{key:0},[U(" Unit: "+j(e.unit),1)],64)):H("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),h(o,{label:"Status",prop:"status"},{default:w((()=>[h(f,{modelValue:e.formData.status,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.status=a)},{default:w((()=>[h(u,{label:0},{default:w((()=>[E])),_:1}),h(u,{label:1},{default:w((()=>[C])),_:1})])),_:1},8,["modelValue"])])),_:1}),h(o,{label:"Discovered",prop:"is_discovered"},{default:w((()=>[h(f,{modelValue:e.formData.is_discovered,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.is_discovered=a)},{default:w((()=>[h(u,{label:0},{default:w((()=>[q])),_:1}),h(u,{label:1},{default:w((()=>[O])),_:1})])),_:1},8,["modelValue"])])),_:1}),h(o,{label:"Begin",prop:"begin"},{default:w((()=>[h(p,{modelValue:e.formData.begin,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.begin=a),type:"datetime",format:"YYYY-MM-DD HH:mm:ss",placeholder:"Select Begin Time"},null,8,["modelValue"])])),_:1}),h(o,{label:"End",prop:"end"},{default:w((()=>[h(p,{modelValue:e.formData.end,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.end=a),type:"datetime",format:"YYYY-MM-DD HH:mm:ss",placeholder:"Select End Time"},null,8,["modelValue"])])),_:1}),h(o,{label:"Duration",prop:"duration"},{default:w((()=>[h(s,{modelValue:e.formData.duration,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.duration=a),type:"number",placeholder:""},null,8,["modelValue"]),I])),_:1}),h(o,{label:"Target User Class",prop:"filters.classes"},{default:w((()=>[h(c,{modelValue:e.formData.filters.classes,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.filters.classes=a)},{default:w((()=>[(y(!0),Y(x,null,v(e.allClasses,((e,a)=>(y(),Y(n,{label:a,key:a},{default:w((()=>[U(j(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),h(o,{label:"Target User Register Time"},{default:w((()=>[h(p,{modelValue:e.formData.filters.register_time_range,"onUpdate:modelValue":a[8]||(a[8]=a=>e.formData.filters.register_time_range=a),type:"datetimerange",format:"YYYY-MM-DD HH:mm:ss","range-separator":"to","start-placeholder":"Begin","end-placeholder":"End"},null,8,["modelValue"])])),_:1}),h(o,{label:"Description",prop:"description"},{default:w((()=>[h(s,{type:"textarea",modelValue:e.formData.description,"onUpdate:modelValue":a[9]||(a[9]=a=>e.formData.description=a),placeholder:""},null,8,["modelValue"])])),_:1}),h(o,null,{default:w((()=>[h(g,{type:"primary",onClick:a[10]||(a[10]=e=>l.submitAdd())},{default:w((()=>[S])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])}));k.render=T,k.__scopeId="data-v-f652630a";export default k;
