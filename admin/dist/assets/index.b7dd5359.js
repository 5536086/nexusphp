var M=Object.defineProperty,U=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var q=(e,t,l)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,k=(e,t)=>{for(var l in t||(t={}))z.call(t,l)&&q(e,l,t[l]);if(A)for(var l of A(t))N.call(t,l)&&q(e,l,t[l]);return e},v=(e,t)=>U(e,j(t));import{B as D,r as Q,t as S,e as i,y as T,f as C,q as w,w as a,h as m,k as o,z as P,E as R,l as f,u as G,o as H,g as J,F as K,p as L,m as O}from"./vendor.7b1bb722.js";import{_ as $,a as V}from"./index.918d62b3.js";import{u as W,r as X}from"./table.77a09864.js";const Y={name:"DialogCheck",props:{reload:Function},setup(e,t){const l=D(null),n=Q({loading:!1,visible:!1,result:"",formData:{peer_id:"",agent:""},rules:{peer_id:[{required:"true"}],agent:[{required:"true"}]}}),p=d=>{n.formData.uid=d,n.visible=!0},g=()=>{l.value.validate(async d=>{if(d){let c=await V.checkAgent(n.formData);R.success(c.msg)}})};return v(k({},S(n)),{handleSubmit:g,formRef:l,open:p})}},Z={class:"dialog-footer"},x=f("Cancel"),ee=f("Check");function te(e,t,l,n,p,g){const d=i("el-input"),c=i("el-form-item"),u=i("el-form"),_=i("el-button"),s=i("el-dialog"),h=T("loading");return C(),w(s,{title:"Check client is allowed or not",modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=r=>e.visible=r),center:"","close-on-click-modal":!1},{footer:a(()=>[m("span",Z,[o(_,{onClick:t[2]||(t[2]=r=>e.visible=!1)},{default:a(()=>[x]),_:1}),o(_,{type:"primary",onClick:n.handleSubmit},{default:a(()=>[ee]),_:1},8,["onClick"])])]),default:a(()=>[P((C(),w(u,{model:e.formData,"label-width":"100px",ref:"formRef",rules:e.rules},{default:a(()=>[o(c,{label:"Peer id",prop:"peer_id"},{default:a(()=>[o(d,{type:"text",modelValue:e.formData.peer_id,"onUpdate:modelValue":t[0]||(t[0]=r=>e.formData.peer_id=r)},null,8,["modelValue"])]),_:1}),o(c,{label:"Agent",prop:"agent"},{default:a(()=>[o(d,{type:"text",modelValue:e.formData.agent,"onUpdate:modelValue":t[1]||(t[1]=r=>e.formData.agent=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[h,e.loading]])]),_:1},8,["modelValue"])}var oe=$(Y,[["render",te]]);const le={name:"ClientTable",components:{DialogCheck:oe},setup(){const e=D(null),t=G(),l=W(),n=D(null);H(()=>{console.log("MedalTable onMounted"),p()});const p=async()=>{l.loading=!0;let r=await V.listAgentAllow(l.query);X(r,l),l.loading=!1},g=()=>{t.push({name:"agent-allow-form"})},d=r=>{t.push({path:"/agent-allow-form",query:{id:r}})},c=async r=>{let y=await V.deleteAgentAllow(r);R.success(y.msg),l.query.page=1,await p()},u=r=>{l.multipleSelection=r},_=r=>{l.query.page=r,p()},s=()=>{l.query.family=""},h=()=>{n.value.open()};return v(k({},S(l)),{multipleTable:e,handleSelectionChange:u,handleAdd:g,handleEdit:d,handleDelete:c,fetchTableData:p,changePage:_,handleReset:s,handleCheck:h,refDialogCheck:n})}},ae=e=>(L("data-v-68116b30"),e=e(),O(),e),ne={class:"nexus-table-header"},re={class:"left"},ie=f("Query"),se=f("Reset"),de={class:"right"},ce=f("Check"),pe=f("Add"),ue=["onClick"],_e=ae(()=>m("a",{style:{cursor:"pointer"}},"Delete",-1));function me(e,t,l,n,p,g){const d=i("el-input"),c=i("el-form-item"),u=i("el-button"),_=i("el-form"),s=i("el-table-column"),h=i("el-popconfirm"),r=i("el-table"),y=i("el-pagination"),E=i("el-card"),B=i("DialogCheck"),F=T("loading");return C(),J(K,null,[o(E,{class:""},{header:a(()=>[m("div",ne,[m("div",re,[o(_,{inline:!0,model:e.query},{default:a(()=>[o(c,{label:""},{default:a(()=>[o(d,{placeholder:"Family",modelValue:e.query.family,"onUpdate:modelValue":t[0]||(t[0]=b=>e.query.family=b)},null,8,["modelValue"])]),_:1}),o(c,null,{default:a(()=>[o(u,{type:"primary",onClick:n.fetchTableData},{default:a(()=>[ie]),_:1},8,["onClick"]),o(u,{type:"primary",onClick:n.handleReset},{default:a(()=>[se]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),m("div",de,[o(u,{type:"primary",icon:"Check",onClick:n.handleCheck},{default:a(()=>[ce]),_:1},8,["onClick"]),o(u,{type:"primary",icon:"Plus",onClick:n.handleAdd},{default:a(()=>[pe]),_:1},8,["onClick"])])])]),default:a(()=>[P((C(),w(r,{ref:"multipleTable",data:e.tableData,"tooltip-effect":"dark",onSelectionChange:n.handleSelectionChange},{default:a(()=>[o(s,{type:"selection",width:"55"}),o(s,{prop:"id",label:"Id",width:"50"}),o(s,{prop:"family",label:"Family"}),o(s,{prop:"start_name",label:"Start name"}),o(s,{prop:"peer_id_start",label:"Peer id start"}),o(s,{prop:"peer_id_pattern",label:"Peer id pattern"}),o(s,{prop:"agent_start",label:"Agent start"}),o(s,{prop:"agent_pattern",label:"Agent pattern"}),o(s,{label:"Action",width:"120"},{default:a(b=>[m("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:I=>n.handleEdit(b.row.id)},"Edit",8,ue),o(h,{title:"Confirm Delete ?",onConfirm:I=>n.handleDelete(b.row.id)},{reference:a(()=>[_e]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[F,e.loading]]),o(y,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.perPage,"current-page":e.currentPage,onCurrentChange:n.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1}),o(B,{ref:"refDialogCheck"},null,512)],64)}var Ce=$(le,[["render",me],["__scopeId","data-v-68116b30"]]);export{Ce as default};
