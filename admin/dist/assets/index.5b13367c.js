var E=Object.defineProperty,F=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var D=(e,a,t)=>a in e?E(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,q=(e,a)=>{for(var t in a||(a={}))V.call(a,t)&&D(e,t,a[t]);if(k)for(var t of k(a))B.call(a,t)&&D(e,t,a[t]);return e},T=(e,a)=>F(e,P(a));import{B as R,u as M,r as N,o as j,t as z,e as s,y as L,f,q as C,w as r,E as Q,h as p,k as l,g as U,A as G,F as H,z as J,l as v,p as K,m as O}from"./vendor.51c5b88d.js";import{_ as W,a as w}from"./index.d73ba3c8.js";import{u as X,r as Y}from"./table.37673c89.js";const Z={name:"ClientTable",setup(){const e=R(null),a=M(),t=X();let n=N({agentAllows:[]});j(()=>{console.log("MedalTable onMounted"),c()});const c=async()=>{t.loading=!0,await y();let o=await w.listAgentDeny(t.query);Y(o,t),t.loading=!1},A=()=>{a.push({name:"agent-deny-form"})},g=o=>{a.push({path:"/agent-deny-form",query:{id:o}})},h=async o=>{let u=await w.deleteAgentDeny(o);Q.success(u.msg),t.query.page=1,await c()},m=o=>{t.multipleSelection=o},_=o=>{t.query.page=o,c()},y=async()=>{let o=await w.listAllAgentAllow();n.agentAllows=o.data},i=()=>{t.query.family_id=""},b=(o,u)=>o.family.family;return T(q({},z(t)),{extraData:n,multipleTable:e,handleSelectionChange:m,handleAdd:A,handleEdit:g,handleDelete:h,fetchTableData:c,changePage:_,handleReset:i,formatColumnFamilyId:b})}},$=e=>(K("data-v-e659167c"),e=e(),O(),e),ee={class:"nexus-table-header"},te={class:"left"},ae=v("Reset"),le=v("Query"),oe={class:"right"},ne=v("Add"),re=["onClick"],se=$(()=>p("a",{style:{cursor:"pointer"}},"Delete",-1));function ie(e,a,t,n,c,A){const g=s("el-option"),h=s("el-select"),m=s("el-form-item"),_=s("el-button"),y=s("el-form"),i=s("el-table-column"),b=s("el-popconfirm"),o=s("el-table"),u=s("el-pagination"),S=s("el-card"),I=L("loading");return f(),C(S,{class:""},{header:r(()=>[p("div",ee,[p("div",te,[l(y,{inline:!0,model:e.query},{default:r(()=>[l(m,{label:""},{default:r(()=>[l(h,{modelValue:e.query.family_id,"onUpdate:modelValue":a[0]||(a[0]=d=>e.query.family_id=d),filterable:"",placeholder:"Family"},{default:r(()=>[(f(!0),U(H,null,G(n.extraData.agentAllows,d=>(f(),C(g,{key:d.id,label:d.family,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:r(()=>[l(_,{type:"primary",onClick:n.handleReset},{default:r(()=>[ae]),_:1},8,["onClick"]),l(_,{type:"primary",onClick:n.fetchTableData},{default:r(()=>[le]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),p("div",oe,[l(_,{type:"primary",icon:"Plus",onClick:n.handleAdd},{default:r(()=>[ne]),_:1},8,["onClick"])])])]),default:r(()=>[J((f(),C(o,{ref:"multipleTable",data:e.tableData,"tooltip-effect":"dark",onSelectionChange:n.handleSelectionChange},{default:r(()=>[l(i,{type:"selection",width:"55"}),l(i,{prop:"id",label:"Id",width:"50"}),l(i,{prop:"family_id",label:"Family",formatter:n.formatColumnFamilyId},null,8,["formatter"]),l(i,{prop:"name",label:"Name"}),l(i,{prop:"peer_id",label:"Peer id"}),l(i,{prop:"agent",label:"Agent"}),l(i,{label:"Action",width:"120"},{default:r(d=>[p("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:x=>n.handleEdit(d.row.id)},"Edit",8,re),l(b,{title:"Confirm Delete ?",onConfirm:x=>n.handleDelete(d.row.id)},{reference:r(()=>[se]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[I,e.loading]]),l(u,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.perPage,"current-page":e.currentPage,onCurrentChange:n.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var me=W(Z,[["render",ie],["__scopeId","data-v-e659167c"]]);export{me as default};
