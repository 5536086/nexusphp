var B=Object.defineProperty,j=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var T=(t,o,h)=>o in t?B(t,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):t[o]=h,w=(t,o)=>{for(var h in o||(o={}))L.call(o,h)&&T(t,h,o[h]);if(C)for(var h of C(o))O.call(o,h)&&T(t,h,o[h]);return t},k=(t,o)=>j(t,G(o));import{B as v,d as I,u as x,r as N,o as U,H as A,t as $,e as c,f as V,q as E,w as a,k as e,E as S,h as r,l as i,G as P,g as q,A as H,F}from"./vendor.7b1bb722.js";import{_ as Y,b as M,a as g}from"./index.fdc9b849.js";import{u as W,r as z}from"./table.77a09864.js";const Q={name:"SettingFormBasic",setup(){const t=v(null),o=I(),h=x(),{id:_}=o.query,f=N({token:M("token")||"",id:_,allClasses:[],formData:{basic:{SITENAME:""}},rules:{"basic.name":[{required:"true"}]}});U(()=>{if(_)g.getExam(_).then(u=>{f.formData.name=u.data.name,f.formData.description=u.data.description,f.formData.begin=u.data.begin,f.formData.end=u.data.end,f.formData.duration=u.data.duration,f.formData.indexes=u.data.indexes,f.formData.filters=u.data.filters,f.formData.status=u.data.status,f.formData.is_discovered=u.data.is_discovered});else{let u=g.listExamIndex();f.formData.indexes=u.data}}),A(()=>{});const p=()=>{t.value.validate(async u=>{if(u){let b=f.formData;b.begin&&(b.begin=dayjs(b.begin).format("YYYY-MM-DD HH:mm:ss")),b.end&&(b.end=dayjs(b.end).format("YYYY-MM-DD HH:mm:ss")),console.log(b),_?await g.updateExam(_,b):await g.storeExam(b),await h.push({name:"exam"})}})},s=u=>{const b=u.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(b))return S.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},n=u=>{f.formData.goodsCoverImg=u.data||""},d=u=>{f.categoryId=u[2]||0};return k(w({},$(f)),{formRef:t,submitAdd:p,handleBeforeUpload:s,handleUrlSuccess:n,handleChangeCate:d})}},K=r("div",{class:"nexus-help-text"}," Website name ",-1),X=i("Submit");function J(t,o,h,_,f,p){const s=c("el-input"),n=c("el-form-item"),d=c("el-button"),u=c("el-form");return V(),E(u,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"200px",class:"formData"},{default:a(()=>[e(n,{label:"Site Name",prop:"basic.SITENAME"},{default:a(()=>[e(s,{modelValue:t.formData.basic.SITENAME,"onUpdate:modelValue":o[0]||(o[0]=b=>t.formData.basic.SITENAME=b),placeholder:""},null,8,["modelValue"]),K]),_:1}),e(n,null,{default:a(()=>[e(d,{type:"primary",onClick:o[1]||(o[1]=b=>_.submitAdd())},{default:a(()=>[X]),_:1})]),_:1})]),_:1},8,["model","rules"])}var Z=Y(Q,[["render",J]]);const ee={name:"SettingFormBasic",setup(){const{proxy:t}=P();console.log("proxy",t);const o=v(null),h=I(),_=x(),{id:f}=h.query,p=N({token:M("token")||"",id:f,allClasses:[],formData:{main:{site_online:"",invitesystem:"",iniupload:"",invite_count:"",invite_timeout:"",verification:"",waitsystem:"",maxdlsystemyes:"",showpolls:"",showstats:"",showtrackerload:"",showforumstats:"",showlastxforumposts:"",showlastxtorrents:"",showhotmovies:"",showclassicmovies:"",showimdbinfo:"",enable_pt_gen_system:"",pt_gen_api_point:"",enablenfo:"",enable_technical_info:"",enableschoolyes:"",restrictemail:"",showshoutbox:"",showfunbox:"",showoffer:"",donation:""}},rules:{"main.site_online":[{required:"true"}]}});U(()=>{if(b(),D(),f)g.getExam(f).then(l=>{p.formData.name=l.data.name,p.formData.description=l.data.description,p.formData.begin=l.data.begin,p.formData.end=l.data.end,p.formData.duration=l.data.duration,p.formData.indexes=l.data.indexes,p.formData.filters=l.data.filters,p.formData.status=l.data.status,p.formData.is_discovered=l.data.is_discovered});else{let l=g.listExamIndex();p.formData.indexes=l.data}}),A(()=>{});const s=()=>{o.value.validate(async l=>{if(l){let m=p.formData;m.begin&&(m.begin=dayjs(m.begin).format("YYYY-MM-DD HH:mm:ss")),m.end&&(m.end=dayjs(m.end).format("YYYY-MM-DD HH:mm:ss")),console.log(m),f?await g.updateExam(f,m):await g.storeExam(m),await _.push({name:"exam"})}})},n=l=>{const m=l.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(m))return S.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},d=l=>{p.formData.goodsCoverImg=l.data||""},u=l=>{p.categoryId=l[2]||0},b=async()=>{let l=await g.listClass();p.allClasses=l.data},D=async()=>{let l=await g.listExamIndex();p.formData.indexes=l.data};return k(w({},$(p)),{formRef:o,submitAdd:s,handleBeforeUpload:n,handleUrlSuccess:d,handleChangeCate:u})}},ae=i("Yes"),oe=i("No"),te=r("div",{class:"nexus-help-text"}," Default 'yes'. Want to turn off your site while performing updates or other types of maintenance? Please Note: Administrators will still be able to see the site. ",-1),le=i("Yes"),se=i("No"),ne=r("div",{class:"nexus-help-text"}," Default 'yes'. Allow Registrations via Invite System. ",-1),ie=r("div",{class:"nexus-help-text"}," How many uploading credit (in Byte, i.e. 1073741824 = 1GB) should each user be given upon registration? Default '0'. ",-1),de=r("div",{class:"nexus-help-text"}," How many invites should each user be given upon registration? Default '0'. ",-1),re=r("div",{class:"nexus-help-text"}," In days. Delete invite code after X days who didn't respond the invite request. Default '7'. ",-1),me=i("Yes"),ue=i("No"),fe=r("div",{class:"nexus-help-text"}," Allow open registrations. Default 'yes'. ",-1),pe=i("Email"),_e=i("Admin"),be=i("Automatically"),he=r("div",{class:"nexus-help-text"}," EMAIL: Sent confirmation email. ADMIN: Manual activate. AUTOMATIC: Activate user after registration. ",-1),ce=i("Yes"),De=i("No"),ge=r("div",{class:"nexus-help-text"}," Enable or disable wait system (see FAQ). ",-1),ye=i("Yes"),ve=i("No"),Ve=r("div",{class:"nexus-help-text"}," Default 'no'. Enable or disable maximum concurrent downloads (AKA Max Slots) (see FAQ). ",-1),we=i("Yes"),ke=i("No"),Se=r("div",{class:"nexus-help-text"}," Default 'yes'. Show POLL system on main page. ",-1),xe=i("Yes"),Ue=i("No"),$e=r("div",{class:"nexus-help-text"}," Default 'yes'. Show STATS system on main page. ",-1),Ee=i("Yes"),Ye=i("No"),Ie=r("div",{class:"nexus-help-text"}," Default 'no'. Show Last x Forum Posts on main page. ",-1),Ne=i("Yes"),Ae=i("No"),Me=r("div",{class:"nexus-help-text"}," Default 'no'. Show Last x Torrents on main page. ",-1),Ce=i("Yes"),Te=i("No"),qe=r("div",{class:"nexus-help-text"}," Default 'yes'. Show Server Load on main page. ",-1),He=i("Yes"),Fe=i("No"),Re=r("div",{class:"nexus-help-text"}," Default 'yes'. Show forum stats on forums page. ",-1),Be=i("Yes"),je=i("No"),Ge=r("div",{class:"nexus-help-text"}," Default 'yes'. Show hot resources on main page. Hot resources are automatically picked by system or manually by staff members. ",-1),Le=i("Yes"),Oe=i("No"),Pe=r("div",{class:"nexus-help-text"}," Default 'no'. Show classic resources on main page. Only designated moderators or above can pick classic resources. ",-1),We=i("Yes"),ze=i("No"),Qe=r("div",{class:"nexus-help-text"}," Default 'yes'. System-wide IMDb info setting. ",-1),Ke=i("Yes"),Xe=i("No"),Je=r("div",{class:"nexus-help-text"}," Default 'no'. System-wide PT-Gen info setting. ",-1),Ze=r("div",{class:"nexus-help-text"}," Default '', when required, reference to Documatation to build yourself ",-1),ea=i("Yes"),aa=i("No"),oa=r("div",{class:"nexus-help-text"}," Default 'yes'. System-wide NFO setting. ",-1),ta=i("Yes"),la=i("No"),sa=r("div",{class:"nexus-help-text"}," Default 'No'. Technical Information comes from software MediaInfo Text view ",-1),na=i("Yes"),ia=i("No"),da=r("div",{class:"nexus-help-text"},[i(" Default 'no'. "),r("span",{style:{color:"red","font-weight":"bold"}},"DO NOT"),i(" enable this unless you know what you are doing! ")],-1),ra=i("Yes"),ma=i("No"),ua=r("div",{class:"nexus-help-text"}," Default 'no'. Set it to 'yes' to only allow certain email domains to register. See here. ",-1),fa=i("Yes"),pa=i("No"),_a=r("div",{class:"nexus-help-text"}," Default 'yes'. Show shoutbox on main page. ",-1),ba=i("Yes"),ha=i("No"),ca=r("div",{class:"nexus-help-text"}," Default 'no'. Show funbox on main page. ",-1),Da=i("Yes"),ga=i("No"),ya=r("div",{class:"nexus-help-text"}," Default 'yes'. Enable or disable offer section. ",-1),va=i("Yes"),Va=i("No"),wa=r("div",{class:"nexus-help-text"}," Show donation and donation top ten. ",-1),ka=i("Submit");function Sa(t,o,h,_,f,p){const s=c("el-radio"),n=c("el-radio-group"),d=c("el-form-item"),u=c("el-input"),b=c("el-button"),D=c("el-form");return V(),E(D,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"250px",class:"formData"},{default:a(()=>[e(d,{label:"Site online",prop:"main.site_online"},{default:a(()=>[e(n,{modelValue:t.formData.main.site_online,"onUpdate:modelValue":o[0]||(o[0]=l=>t.formData.main.site_online=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ae]),_:1}),e(s,{label:"no"},{default:a(()=>[oe]),_:1})]),_:1},8,["modelValue"]),te]),_:1}),e(d,{label:"Enable invite system",prop:"main.invitesystem"},{default:a(()=>[e(n,{modelValue:t.formData.main.invitesystem,"onUpdate:modelValue":o[1]||(o[1]=l=>t.formData.main.invitesystem=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[le]),_:1}),e(s,{label:"no"},{default:a(()=>[se]),_:1})]),_:1},8,["modelValue"]),ne]),_:1}),e(d,{label:"Initial uploading amount",prop:"main.iniupload"},{default:a(()=>[e(u,{modelValue:t.formData.main.iniupload,"onUpdate:modelValue":o[2]||(o[2]=l=>t.formData.main.iniupload=l),placeholder:"",type:"number"},null,8,["modelValue"]),ie]),_:1}),e(d,{label:"Initial number of invites",prop:"main.invite_count"},{default:a(()=>[e(u,{modelValue:t.formData.main.invite_count,"onUpdate:modelValue":o[3]||(o[3]=l=>t.formData.main.invite_count=l),placeholder:"",type:"number"},null,8,["modelValue"]),de]),_:1}),e(d,{label:"Invite timeout",prop:"main.invite_timeout"},{default:a(()=>[e(u,{modelValue:t.formData.main.invite_timeout,"onUpdate:modelValue":o[4]||(o[4]=l=>t.formData.main.invite_timeout=l),placeholder:"",type:"number"},null,8,["modelValue"]),re]),_:1}),e(d,{label:"Enable registration system",prop:"main.registration"},{default:a(()=>[e(n,{modelValue:t.formData.main.registration,"onUpdate:modelValue":o[5]||(o[5]=l=>t.formData.main.registration=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[me]),_:1}),e(s,{label:"no"},{default:a(()=>[ue]),_:1})]),_:1},8,["modelValue"]),fe]),_:1}),e(d,{label:"Verification type",prop:"main.verification"},{default:a(()=>[e(n,{modelValue:t.formData.main.verification,"onUpdate:modelValue":o[6]||(o[6]=l=>t.formData.main.verification=l)},{default:a(()=>[e(s,{label:"email"},{default:a(()=>[pe]),_:1}),e(s,{label:"admin"},{default:a(()=>[_e]),_:1}),e(s,{label:"automatic"},{default:a(()=>[be]),_:1})]),_:1},8,["modelValue"]),he]),_:1}),e(d,{label:"Enable wait system",prop:"main.waitsystem"},{default:a(()=>[e(n,{modelValue:t.formData.main.waitsystem,"onUpdate:modelValue":o[7]||(o[7]=l=>t.formData.main.waitsystem=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ce]),_:1}),e(s,{label:"no"},{default:a(()=>[De]),_:1})]),_:1},8,["modelValue"]),ge]),_:1}),e(d,{label:"Enable max slots system",prop:"main.maxdlsystemyes"},{default:a(()=>[e(n,{modelValue:t.formData.main.maxdlsystemyes,"onUpdate:modelValue":o[8]||(o[8]=l=>t.formData.main.maxdlsystemyes=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ye]),_:1}),e(s,{label:"no"},{default:a(()=>[ve]),_:1})]),_:1},8,["modelValue"]),Ve]),_:1}),e(d,{label:"Show polls",prop:"main.showpolls"},{default:a(()=>[e(n,{modelValue:t.formData.main.showpolls,"onUpdate:modelValue":o[9]||(o[9]=l=>t.formData.main.showpolls=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[we]),_:1}),e(s,{label:"no"},{default:a(()=>[ke]),_:1})]),_:1},8,["modelValue"]),Se]),_:1}),e(d,{label:"Show stats",prop:"main.showstats"},{default:a(()=>[e(n,{modelValue:t.formData.main.showstats,"onUpdate:modelValue":o[10]||(o[10]=l=>t.formData.main.showstats=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[xe]),_:1}),e(s,{label:"no"},{default:a(()=>[Ue]),_:1})]),_:1},8,["modelValue"]),$e]),_:1}),e(d,{label:"Show last x forum posts",prop:"main.showlastxforumposts"},{default:a(()=>[e(n,{modelValue:t.formData.main.showlastxforumposts,"onUpdate:modelValue":o[11]||(o[11]=l=>t.formData.main.showlastxforumposts=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ee]),_:1}),e(s,{label:"no"},{default:a(()=>[Ye]),_:1})]),_:1},8,["modelValue"]),Ie]),_:1}),e(d,{label:"Show Last x Torrents",prop:"main.showlastxtorrents"},{default:a(()=>[e(n,{modelValue:t.formData.main.showlastxtorrents,"onUpdate:modelValue":o[12]||(o[12]=l=>t.formData.main.showlastxtorrents=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ne]),_:1}),e(s,{label:"no"},{default:a(()=>[Ae]),_:1})]),_:1},8,["modelValue"]),Me]),_:1}),e(d,{label:"Show server load",prop:"main.showtrackerload"},{default:a(()=>[e(n,{modelValue:t.formData.main.showtrackerload,"onUpdate:modelValue":o[13]||(o[13]=l=>t.formData.main.showtrackerload=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ce]),_:1}),e(s,{label:"no"},{default:a(()=>[Te]),_:1})]),_:1},8,["modelValue"]),qe]),_:1}),e(d,{label:"Show forum stats",prop:"main.showforumstats"},{default:a(()=>[e(n,{modelValue:t.formData.main.showforumstats,"onUpdate:modelValue":o[14]||(o[14]=l=>t.formData.main.showforumstats=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[He]),_:1}),e(s,{label:"no"},{default:a(()=>[Fe]),_:1})]),_:1},8,["modelValue"]),Re]),_:1}),e(d,{label:"Show hot",prop:"main.showhotmovies"},{default:a(()=>[e(n,{modelValue:t.formData.main.showhotmovies,"onUpdate:modelValue":o[15]||(o[15]=l=>t.formData.main.showhotmovies=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Be]),_:1}),e(s,{label:"no"},{default:a(()=>[je]),_:1})]),_:1},8,["modelValue"]),Ge]),_:1}),e(d,{label:"Show classic",prop:"main.showclassicmovies"},{default:a(()=>[e(n,{modelValue:t.formData.main.showclassicmovies,"onUpdate:modelValue":o[16]||(o[16]=l=>t.formData.main.showclassicmovies=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Le]),_:1}),e(s,{label:"no"},{default:a(()=>[Oe]),_:1})]),_:1},8,["modelValue"]),Pe]),_:1}),e(d,{label:"Enable IMDb system",prop:"main.showimdbinfo"},{default:a(()=>[e(n,{modelValue:t.formData.main.showimdbinfo,"onUpdate:modelValue":o[17]||(o[17]=l=>t.formData.main.showimdbinfo=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[We]),_:1}),e(s,{label:"no"},{default:a(()=>[ze]),_:1})]),_:1},8,["modelValue"]),Qe]),_:1}),e(d,{label:"Enable PT-Gen system",prop:"main.enable_pt_gen_system"},{default:a(()=>[e(n,{modelValue:t.formData.main.enable_pt_gen_system,"onUpdate:modelValue":o[18]||(o[18]=l=>t.formData.main.enable_pt_gen_system=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Ke]),_:1}),e(s,{label:"no"},{default:a(()=>[Xe]),_:1})]),_:1},8,["modelValue"]),Je]),_:1}),e(d,{label:"PT-Gen api point",prop:"main.pt_gen_api_point"},{default:a(()=>[e(u,{modelValue:t.formData.main.pt_gen_api_point,"onUpdate:modelValue":o[19]||(o[19]=l=>t.formData.main.pt_gen_api_point=l),placeholder:""},null,8,["modelValue"]),Ze]),_:1}),e(d,{label:"Enable NFO",prop:"main.enablenfo"},{default:a(()=>[e(n,{modelValue:t.formData.main.enablenfo,"onUpdate:modelValue":o[20]||(o[20]=l=>t.formData.main.enablenfo=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ea]),_:1}),e(s,{label:"no"},{default:a(()=>[aa]),_:1})]),_:1},8,["modelValue"]),oa]),_:1}),e(d,{label:"Enable technical information",prop:"main.enable_technical_info"},{default:a(()=>[e(n,{modelValue:t.formData.main.enable_technical_info,"onUpdate:modelValue":o[21]||(o[21]=l=>t.formData.main.enable_technical_info=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ta]),_:1}),e(s,{label:"no"},{default:a(()=>[la]),_:1})]),_:1},8,["modelValue"]),sa]),_:1}),e(d,{label:"Enable school system",prop:"main.enableschoolyes"},{default:a(()=>[e(n,{modelValue:t.formData.main.enableschoolyes,"onUpdate:modelValue":o[22]||(o[22]=l=>t.formData.main.enableschoolyes=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[na]),_:1}),e(s,{label:"no"},{default:a(()=>[ia]),_:1})]),_:1},8,["modelValue"]),da]),_:1}),e(d,{label:"Restrict email domain",prop:"main.restrictemail"},{default:a(()=>[e(n,{modelValue:t.formData.main.restrictemail,"onUpdate:modelValue":o[23]||(o[23]=l=>t.formData.main.restrictemail=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ra]),_:1}),e(s,{label:"no"},{default:a(()=>[ma]),_:1})]),_:1},8,["modelValue"]),ua]),_:1}),e(d,{label:"Show Shoutbox",prop:"main.showshoutbox"},{default:a(()=>[e(n,{modelValue:t.formData.main.showshoutbox,"onUpdate:modelValue":o[24]||(o[24]=l=>t.formData.main.showshoutbox=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[fa]),_:1}),e(s,{label:"no"},{default:a(()=>[pa]),_:1})]),_:1},8,["modelValue"]),_a]),_:1}),e(d,{label:"Show funbox",prop:"main.showfunbox"},{default:a(()=>[e(n,{modelValue:t.formData.main.showfunbox,"onUpdate:modelValue":o[25]||(o[25]=l=>t.formData.main.showfunbox=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[ba]),_:1}),e(s,{label:"no"},{default:a(()=>[ha]),_:1})]),_:1},8,["modelValue"]),ca]),_:1}),e(d,{label:"Enable offer section",prop:"main.showoffer"},{default:a(()=>[e(n,{modelValue:t.formData.main.showoffer,"onUpdate:modelValue":o[26]||(o[26]=l=>t.formData.main.showoffer=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[Da]),_:1}),e(s,{label:"no"},{default:a(()=>[ga]),_:1})]),_:1},8,["modelValue"]),ya]),_:1}),e(d,{label:"Enable Donation",prop:"main.donation"},{default:a(()=>[e(n,{modelValue:t.formData.main.donation,"onUpdate:modelValue":o[27]||(o[27]=l=>t.formData.main.donation=l)},{default:a(()=>[e(s,{label:"yes"},{default:a(()=>[va]),_:1}),e(s,{label:"no"},{default:a(()=>[Va]),_:1})]),_:1},8,["modelValue"]),wa]),_:1}),e(d,null,{default:a(()=>[e(b,{type:"primary",onClick:o[28]||(o[28]=l=>_.submitAdd())},{default:a(()=>[ka]),_:1})]),_:1})]),_:1},8,["model","rules"])}var xa=Y(ee,[["render",Sa]]);const Ua={name:"SettingFormBasic",setup(){const t=v(null),o=I();x();const{id:h}=o.query,_=N({loading:!1,token:M("token")||"",id:h,allClasses:[],formData:{backup:{enabled:"",frequency:"",hour:"",minute:"",google_drive_client_id:"",google_drive_client_secret:"",google_drive_refresh_token:"",google_drive_folder_id:""}},rules:{"backup.enabled":[{required:"true"}]}});U(()=>{}),A(()=>{});const f=()=>{t.value.validate(async n=>{if(n){let d=_.formData;console.log(d);let u=await g.storeSetting(d);S.success(u.msg),await s()}})},p=n=>{const d=n.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(d))return S.error("\u8BF7\u4E0A\u4F20 jpg\u3001jpeg\u3001png \u683C\u5F0F\u7684\u56FE\u7247"),!1},s=async()=>{_.loading=!0;let n=await g.listSetting({prefix:"backup"});console.log("listSetting",n),_.formData=n.data,_.loading=!1};return k(w({},$(_)),{formRef:t,submitAdd:f,handleBeforeUpload:p,listSetting:s})}},$a=i("Yes"),Ea=i("No"),Ya=r("div",{class:"nexus-help-text"}," Enable backup or not. ",-1),Ia=i("Daily"),Na=i("Hourly"),Aa=r("div",{class:"nexus-help-text"}," Backup Frequency. ",-1),Ma=r("div",{class:"nexus-help-text"}," Do backup at this hour, If frequency = 'hourly', this value will be ignore. ",-1),Ca=r("div",{class:"nexus-help-text"}," Do backup at this minute. ",-1),Ta=r("div",{class:"nexus-help-text"}," Google drive client ID. ",-1),qa=r("div",{class:"nexus-help-text"}," Google drive client secret. ",-1),Ha=r("div",{class:"nexus-help-text"}," Google drive refresh token. ",-1),Fa=r("div",{class:"nexus-help-text"}," Google drive folder ID. If not set, will store in root. ",-1),Ra=i("Submit");function Ba(t,o,h,_,f,p){const s=c("el-radio"),n=c("el-form-item"),d=c("el-option"),u=c("el-select"),b=c("el-input"),D=c("el-button"),l=c("el-form");return V(),E(l,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"250px",class:"formData",size:"mini","v-loading":t.loading},{default:a(()=>[e(n,{label:"Enabled",prop:"backup.enabled"},{default:a(()=>[e(s,{modelValue:t.formData.backup.enabled,"onUpdate:modelValue":o[0]||(o[0]=m=>t.formData.backup.enabled=m),label:"yes"},{default:a(()=>[$a]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.backup.enabled,"onUpdate:modelValue":o[1]||(o[1]=m=>t.formData.backup.enabled=m),label:"no"},{default:a(()=>[Ea]),_:1},8,["modelValue"]),Ya]),_:1}),e(n,{label:"Frequency",prop:"backup.frequency"},{default:a(()=>[e(s,{modelValue:t.formData.backup.frequency,"onUpdate:modelValue":o[2]||(o[2]=m=>t.formData.backup.frequency=m),label:"daily"},{default:a(()=>[Ia]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.backup.frequency,"onUpdate:modelValue":o[3]||(o[3]=m=>t.formData.backup.frequency=m),label:"hourly"},{default:a(()=>[Na]),_:1},8,["modelValue"]),Aa]),_:1}),e(n,{label:"Hour",prop:"backup.hour"},{default:a(()=>[e(u,{modelValue:t.formData.backup.hour,"onUpdate:modelValue":o[4]||(o[4]=m=>t.formData.backup.hour=m),filterable:""},{default:a(()=>[(V(),q(F,null,H(24,m=>e(d,{key:m,label:m-1,value:m-1},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Ma]),_:1}),e(n,{label:"Minute",prop:"backup.minute"},{default:a(()=>[e(u,{modelValue:t.formData.backup.minute,"onUpdate:modelValue":o[5]||(o[5]=m=>t.formData.backup.minute=m),filterable:""},{default:a(()=>[(V(),q(F,null,H(60,m=>e(d,{key:m,label:m-1,value:m-1},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Ca]),_:1}),e(n,{label:"Google drive client ID",prop:"backup.google_drive_client_id"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_client_id,"onUpdate:modelValue":o[6]||(o[6]=m=>t.formData.backup.google_drive_client_id=m),label:"Google drive client ID"},null,8,["modelValue"]),Ta]),_:1}),e(n,{label:"Google drive client secret",prop:"backup.google_drive_client_secret"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_client_secret,"onUpdate:modelValue":o[7]||(o[7]=m=>t.formData.backup.google_drive_client_secret=m),label:"Google drive client secret"},null,8,["modelValue"]),qa]),_:1}),e(n,{label:"Google drive refresh token",prop:"backup.google_drive_refresh_token"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_refresh_token,"onUpdate:modelValue":o[8]||(o[8]=m=>t.formData.backup.google_drive_refresh_token=m),label:"Google drive refresh token"},null,8,["modelValue"]),Ha]),_:1}),e(n,{label:"Google drive folder ID",prop:"backup.google_drive_folder_id"},{default:a(()=>[e(b,{modelValue:t.formData.backup.google_drive_folder_id,"onUpdate:modelValue":o[9]||(o[9]=m=>t.formData.backup.google_drive_folder_id=m),label:"Google drive folder ID"},null,8,["modelValue"]),Fa]),_:1}),e(n,null,{default:a(()=>[e(D,{type:"primary",onClick:o[10]||(o[10]=m=>_.submitAdd())},{default:a(()=>[Ra]),_:1})]),_:1})]),_:1},8,["model","rules","v-loading"])}var ja=Y(Ua,[["render",Ba]]);const Ga={name:"SettingFormHR",setup(){const t=v(null),o=I();x();const{id:h}=o.query,_=N({token:M("token")||"",id:h,allClasses:[],formData:{hr:{mode:"",inspect_time:"",seed_time_minimum:"",ignore_when_ratio_reach:"",ban_user_when_counts_reach:""}},rules:{"hr.enabled":[{required:"true"}]}});U(()=>{}),A(()=>{});const f=()=>{t.value.validate(async s=>{if(s){let n=_.formData;console.log(n);let d=await g.storeSetting(n);S.success(d.msg),await p()}})},p=async()=>{let s=await g.listSetting({prefix:"hr"});console.log("listSetting",s),_.formData=s.data};return k(w({},$(_)),{formRef:t,submitAdd:f,listSetting:p})}},La=i("Disabled"),Oa=i("Manual"),Pa=i("Global"),Wa=r("div",{class:"nexus-help-text"}," Set H&R mode. ",-1),za=r("div",{class:"nexus-help-text"}," Inspect time duration after download complete(Unit: Hour). ",-1),Qa=r("div",{class:"nexus-help-text"}," Seed time minimum (Unit: Hour, must be less than Inspect time). ",-1),Ka=r("div",{class:"nexus-help-text"}," When ratio reach this value, this H&R will be ignored. ",-1),Xa=r("div",{class:"nexus-help-text"}," When total H&R counts reach this value, user account will be disabled. ",-1),Ja=i("Submit");function Za(t,o,h,_,f,p){const s=c("el-radio"),n=c("el-form-item"),d=c("el-input"),u=c("el-button"),b=c("el-form");return V(),E(b,{model:t.formData,rules:t.rules,ref:"formRef","label-width":"250px",class:"formData",size:"mini"},{default:a(()=>[e(n,{label:"Mode",prop:"hr.mode"},{default:a(()=>[e(s,{modelValue:t.formData.hr.mode,"onUpdate:modelValue":o[0]||(o[0]=D=>t.formData.hr.mode=D),label:"disabled"},{default:a(()=>[La]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.hr.mode,"onUpdate:modelValue":o[1]||(o[1]=D=>t.formData.hr.mode=D),label:"manual"},{default:a(()=>[Oa]),_:1},8,["modelValue"]),e(s,{modelValue:t.formData.hr.mode,"onUpdate:modelValue":o[2]||(o[2]=D=>t.formData.hr.mode=D),label:"global"},{default:a(()=>[Pa]),_:1},8,["modelValue"]),Wa]),_:1}),e(n,{label:"Inspect time",prop:"hr.inspect_time"},{default:a(()=>[e(d,{modelValue:t.formData.hr.inspect_time,"onUpdate:modelValue":o[3]||(o[3]=D=>t.formData.hr.inspect_time=D),type:"number"},null,8,["modelValue"]),za]),_:1}),e(n,{label:"Seed time minimum",prop:"hr.seed_time_minimum"},{default:a(()=>[e(d,{modelValue:t.formData.hr.seed_time_minimum,"onUpdate:modelValue":o[4]||(o[4]=D=>t.formData.hr.seed_time_minimum=D),type:"number"},null,8,["modelValue"]),Qa]),_:1}),e(n,{label:"Ignore",prop:"hr.ignore_when_ratio_reach"},{default:a(()=>[e(d,{modelValue:t.formData.hr.ignore_when_ratio_reach,"onUpdate:modelValue":o[5]||(o[5]=D=>t.formData.hr.ignore_when_ratio_reach=D),type:"number"},null,8,["modelValue"]),Ka]),_:1}),e(n,{label:"Disable user",prop:"hr.disable_user_when_counts_reach"},{default:a(()=>[e(d,{modelValue:t.formData.hr.ban_user_when_counts_reach,"onUpdate:modelValue":o[6]||(o[6]=D=>t.formData.hr.ban_user_when_counts_reach=D)},null,8,["modelValue"]),Xa]),_:1}),e(n,null,{default:a(()=>[e(u,{type:"primary",onClick:o[7]||(o[7]=D=>_.submitAdd())},{default:a(()=>[Ja]),_:1})]),_:1})]),_:1},8,["model","rules"])}var eo=Y(Ga,[["render",Za]]);const ao={name:"Setting",components:{FormBasic:Z,FormMain:xa,FormBackup:ja,FormHR:eo},setup(){const t=v(null),o=x(),h=v(null),_=v(null),f=W();let p=0;const s=[h,_];U(()=>{console.log("Setting onMounted"),s[p].value.listSetting()});const n=async()=>{f.loading=!0;let y=await g.listExam(f.query);z(y,f),f.loading=!1},d=()=>{o.push({name:"exam-form"})},u=y=>{o.push({path:"/exam-form",query:{id:y}})},b=async y=>{let R=await g.deleteExam(y);S.success(R.msg),f.query.page=1,await n()},D=y=>{f.multipleSelection=y},l=y=>{f.query.page=y,n()},m=y=>{p=y.index,s[p].value.listSetting()};return k(w({},$(f)),{multipleTable:t,handleSelectionChange:D,handleAdd:d,handleEdit:u,handleDelete:b,handleTabClick:m,fetchTableData:n,changePage:l,backup:h,hr:_})}};function oo(t,o,h,_,f,p){const s=c("FormBackup"),n=c("el-tab-pane"),d=c("FormHR"),u=c("el-tabs");return V(),E(u,{type:"border-card",onTabClick:_.handleTabClick},{default:a(()=>[e(n,{label:"Backup"},{default:a(()=>[e(s,{ref:"backup"},null,512)]),_:1}),e(n,{label:"H&R"},{default:a(()=>[e(d,{ref:"hr"},null,512)]),_:1})]),_:1},8,["onTabClick"])}var io=Y(ao,[["render",oo]]);export{io as default};
