var T=Object.defineProperty,E=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var D=(a,o,l)=>o in a?T(a,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[o]=l,k=(a,o)=>{for(var l in o||(o={}))B.call(o,l)&&D(a,l,o[l]);if(w)for(var l of w(o))P.call(o,l)&&D(a,l,o[l]);return a},v=(a,o)=>E(a,A(o));import{B as R,u as j,o as z,t as M,e as d,y as N,f as V,q as S,w as s,E as x,h as p,k as t,z as I,l as C}from"./vendor.51c5b88d.js";import{_ as Q,a as U}from"./index.d73ba3c8.js";import{u as F,r as G,a as H}from"./table.37673c89.js";const J={name:"UserTable",setup(){const a=R(null),o=j(),l=F();z(()=>{console.log("UserTable onMounted"),n()});const n=async()=>{l.loading=!0;let e=await U.listUser(l.query);G(e,l),l.loading=!1},y=()=>{o.push({name:"user-form"})},q=e=>{o.push({name:"user-form",query:{id:e}})},i=async e=>{let c=await U.deleteExam(e);x.success(c.msg),l.query.page=1,await n()},u=e=>{l.multipleSelection=e},m=e=>{l.query.page=e,n()},f=e=>{H(e,l),n()},r=()=>{l.query.id="",l.query.username="",l.query.email=""},_=e=>{o.push({name:"user-detail",query:{id:e}})},h=(e,c)=>e.class_text,b=(e,c)=>e.uploaded_text,g=(e,c)=>e.downloaded_text;return v(k({},M(l)),{multipleTable:a,handleSelectionChange:u,handleAdd:y,handleEdit:q,handleDelete:i,handleDetail:_,fetchTableData:n,changePage:m,handleSortChange:f,formatColumnClass:h,formatColumnUploaded:b,formatColumnDownloaded:g,handleReset:r})}},K={class:"nexus-table-header"},L={class:"left"},O=C("Reset"),W=C("Query"),X={class:"right"},Y=C("Add"),Z=["onClick"];function $(a,o,l,n,y,q){const i=d("el-input"),u=d("el-form-item"),m=d("el-button"),f=d("el-form"),r=d("el-table-column"),_=d("el-table"),h=d("el-pagination"),b=d("el-card"),g=N("loading");return V(),S(b,null,{header:s(()=>[p("div",K,[p("div",L,[t(f,{inline:!0,model:a.query},{default:s(()=>[t(u,{label:""},{default:s(()=>[t(i,{placeholder:"ID",modelValue:a.query.id,"onUpdate:modelValue":o[0]||(o[0]=e=>a.query.id=e)},null,8,["modelValue"])]),_:1}),t(u,{label:""},{default:s(()=>[t(i,{placeholder:"Username",modelValue:a.query.username,"onUpdate:modelValue":o[1]||(o[1]=e=>a.query.username=e)},null,8,["modelValue"])]),_:1}),t(u,{label:""},{default:s(()=>[t(i,{placeholder:"Email",modelValue:a.query.email,"onUpdate:modelValue":o[2]||(o[2]=e=>a.query.email=e)},null,8,["modelValue"])]),_:1}),t(u,null,{default:s(()=>[t(m,{type:"primary",onClick:n.handleReset},{default:s(()=>[O]),_:1},8,["onClick"]),t(m,{type:"primary",onClick:n.fetchTableData},{default:s(()=>[W]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),p("div",X,[t(m,{type:"primary",icon:"Plus",onClick:n.handleAdd},{default:s(()=>[Y]),_:1},8,["onClick"])])])]),default:s(()=>[I((V(),S(_,{ref:"multipleTable",data:a.tableData,"tooltip-effect":"dark",onSortChange:n.handleSortChange,onSelectionChange:n.handleSelectionChange},{default:s(()=>[t(r,{type:"selection",width:"55"}),t(r,{prop:"id",label:"Id",width:"80",sortable:"custom"}),t(r,{prop:"username",label:"Username",sortable:"custom"}),t(r,{prop:"email",label:"Email"}),t(r,{prop:"class",label:"Class",sortable:"custom",formatter:n.formatColumnClass},null,8,["formatter"]),t(r,{prop:"uploaded",label:"Uploaded",sortable:"custom",formatter:n.formatColumnUploaded},null,8,["formatter"]),t(r,{prop:"downloaded",label:"Downloaded",sortable:"custom",formatter:n.formatColumnDownloaded},null,8,["formatter"]),t(r,{prop:"bonus",label:"Bonus"}),t(r,{prop:"status",label:"Status"}),t(r,{prop:"added",label:"Added"}),t(r,{label:"Action",width:"100"},{default:s(e=>[p("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:c=>n.handleDetail(e.row.id)},"Detail",8,Z)]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[g,a.loading]]),t(h,{background:"",layout:"prev, pager, next",total:a.total,"page-size":a.perPage,"current-page":a.currentPage,onCurrentChange:n.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var te=Q(J,[["render",$]]);export{te as default};
