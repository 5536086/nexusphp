var x=Object.defineProperty,B=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var S=(t,a,l)=>a in t?x(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,T=(t,a)=>{for(var l in a||(a={}))I.call(a,l)&&S(t,l,a[l]);if(V)for(var l of V(a))P.call(a,l)&&S(t,l,a[l]);return t},U=(t,a)=>B(t,H(a));import{B as j,u as M,r as z,o as E,t as N,e as u,y as A,f as _,q as v,w as n,E as F,h as f,k as o,g as L,A as Q,F as G,z as J,j as K,l as R}from"./vendor.7b1bb722.js";import{_ as O,a as D}from"./index.eaf91321.js";import{u as W,r as X}from"./table.77a09864.js";const Y={name:"HrTable",setup(){const t=j(null),a=M(),l=W();let r=z({status:[]});E(()=>{console.log("MedalTable onMounted"),m()});const m=async()=>{l.loading=!0,await p();let e=await D.listHr(l.query);X(e,l),l.loading=!1},k=()=>{a.push({name:"agent-deny-form"})},h=e=>{a.push({path:"/hr-detail",query:{id:e}})},b=async e=>{let i=await D.deleteHr(e);F.success(i.msg),l.query.page=1,await m()},d=e=>{l.multipleSelection=e},c=e=>{l.query.page=e,m()},p=async()=>{let e=await D.listHrStatus();r.status=e.data},g=()=>{l.query.status="",l.query.uid="",l.query.username="",l.query.torrent_id=""},s=(e,i)=>e.user.username,y=(e,i)=>'<a href="" target="_blank">'+e.torrent.name+"</a>",w=(e,i)=>e.snatch.upload_text,C=(e,i)=>e.snatch.download_text,q=(e,i)=>e.snatch.share_ratio;return U(T({},N(l)),{extraData:r,multipleTable:t,handleSelectionChange:d,handlePardon:k,handleDetail:h,handleDelete:b,fetchTableData:m,changePage:c,handleReset:g,formatColumnUsername:s,formatColumnTorrent:y,formatColumnUploaded:w,formatColumnDownloaded:C,formatColumnShareRatio:q})}},Z={class:"nexus-table-header"},$={class:"left"},ee=R("Query"),te=R("Reset"),ae=["title","href"],le=["onClick"];function oe(t,a,l,r,m,k){const h=u("el-option"),b=u("el-select"),d=u("el-form-item"),c=u("el-input"),p=u("el-button"),g=u("el-form"),s=u("el-table-column"),y=u("el-table"),w=u("el-pagination"),C=u("el-card"),q=A("loading");return _(),v(C,{class:""},{header:n(()=>[f("div",Z,[f("div",$,[o(g,{inline:!0,model:t.query},{default:n(()=>[o(d,{label:""},{default:n(()=>[o(b,{modelValue:t.query.status,"onUpdate:modelValue":a[0]||(a[0]=e=>t.query.status=e),filterable:"",placeholder:"Status"},{default:n(()=>[(_(!0),L(G,null,Q(r.extraData.status,e=>(_(),v(h,{key:e.status,label:e.text,value:e.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:""},{default:n(()=>[o(c,{placeholder:"UID",modelValue:t.query.uid,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.uid=e)},null,8,["modelValue"])]),_:1}),o(d,{label:""},{default:n(()=>[o(c,{placeholder:"Username",modelValue:t.query.username,"onUpdate:modelValue":a[2]||(a[2]=e=>t.query.username=e)},null,8,["modelValue"])]),_:1}),o(d,{label:""},{default:n(()=>[o(c,{placeholder:"Torrent ID",modelValue:t.query.torrent_id,"onUpdate:modelValue":a[3]||(a[3]=e=>t.query.torrent_id=e)},null,8,["modelValue"])]),_:1}),o(d,null,{default:n(()=>[o(p,{type:"primary",onClick:r.fetchTableData},{default:n(()=>[ee]),_:1},8,["onClick"]),o(p,{type:"primary",onClick:r.handleReset},{default:n(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])])])]),default:n(()=>[J((_(),v(y,{ref:"multipleTable",data:t.tableData,"tooltip-effect":"dark",onSelectionChange:r.handleSelectionChange},{default:n(()=>[o(s,{type:"selection",width:"55"}),o(s,{prop:"id",label:"Id",width:"50"}),o(s,{prop:"",label:"Username",width:"120",formatter:r.formatColumnUsername},null,8,["formatter"]),o(s,{prop:"",label:"Torrent"},{default:n(e=>[f("a",{class:"text-one-line",title:e.row.torrent.name,href:e.row.torrent.details_url,target:"_blank"},K(e.row.torrent.name),9,ae)]),_:1}),o(s,{prop:"",label:"Uploaded",width:"200",formatter:r.formatColumnUploaded},null,8,["formatter"]),o(s,{prop:"",label:"Downloaded",width:"200",formatter:r.formatColumnDownloaded},null,8,["formatter"]),o(s,{prop:"",label:"Share ratio",width:"120",formatter:r.formatColumnShareRatio},null,8,["formatter"]),o(s,{prop:"seed_time_required",label:"Seed time required",width:"160"}),o(s,{prop:"inspect_time_left",label:"Inspect time left",width:"160"}),o(s,{prop:"status_text",label:"Status",width:"70"}),o(s,{label:"Action",width:"120"},{default:n(e=>[f("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:i=>r.handleDetail(e.row.id)},"Detail",8,le)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[q,t.loading]]),o(w,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.perPage,"current-page":t.currentPage,onCurrentChange:r.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var de=O(Y,[["render",oe],["__scopeId","data-v-6797a525"]]);export{de as default};
