var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,l=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,d=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,o)=>{for(var r in o||(o={}))a.call(o,r)&&d(e,r,o[r]);if(l)for(var r of l(o))t.call(o,r)&&d(e,r,o[r]);return e};import{r,a as s,B as n,j as m,b as u,n as i,t as f,q as p,s as c,u as b,v as D,p as _,d as g,e as V,o as y,c as x,f as v,F as Y,y as h,i as U,z as j,A as k,g as E}from"./index.ad419675.js";const w={name:"ExamForm",setup(){const{proxy:e}=p();console.log("proxy",e);const a=r(null),l=c(),t=b(),{id:d}=l.query,_=s({token:n("token")||"",id:d,allClasses:[],formData:{name:"",description:"",begin:"",end:"",indexes:[],filters:{classes:[],register_time_range:[]},status:"",is_discovered:""},rules:{name:[{required:"true"}],indexes:[{required:"true"}],status:[{required:"true"}],is_discovered:[{required:"true"}]}});m((()=>{if(g(),V(),d)u.getExam(d).then((e=>{_.formData.name=e.data.name,_.formData.description=e.data.description,_.formData.begin=e.data.begin,_.formData.end=e.data.end,_.formData.indexes=e.data.indexes,_.formData.filters=e.data.filters,_.formData.status=e.data.status,_.formData.is_discovered=e.data.is_discovered}));else{let e=u.listExamIndex();_.formData.indexes=e.data}})),i((()=>{}));const g=async()=>{let e=await u.listClass();_.allClasses=e.data},V=async()=>{let e=await u.listExamIndex();_.formData.indexes=e.data};return o(o({},f(_)),{formRef:a,submitAdd:()=>{a.value.validate((async e=>{if(e){let e=_.formData;e.begin&&(e.begin=dayjs(e.begin).format("YYYY-MM-DD HH:mm:ss")),e.end&&(e.end=dayjs(e.end).format("YYYY-MM-DD HH:mm:ss")),console.log(e),d?await u.updateExam(d,e):await u.storeExam(e),await t.push({name:"exam"})}}))},handleBeforeUpload:e=>{const a=e.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(a))return D.error("请上传 jpg、jpeg、png 格式的图片"),!1},handleUrlSuccess:e=>{_.formData.goodsCoverImg=e.data||""},handleChangeCate:e=>{_.categoryId=e[2]||0}})}},H=E();_("data-v-cb4914c2");const M=U("Enabled"),C=U("Disabled"),q=U("No"),I=U("Yes"),O=U("Submit");g();const S=H(((e,a,l,t,d,o)=>{const r=V("el-input"),s=V("el-form-item"),n=V("el-checkbox"),m=V("el-col"),u=V("el-row"),i=V("el-radio"),f=V("el-radio-group"),p=V("el-date-picker"),c=V("el-checkbox-group"),b=V("el-button"),D=V("el-form");return y(),x("div",null,[v(u,null,{default:H((()=>[v(m,{span:12},{default:H((()=>[v(D,{model:e.formData,rules:e.rules,ref:"formRef","label-width":"200px",class:"formData"},{default:H((()=>[v(s,{label:"Name",prop:"name"},{default:H((()=>[v(r,{modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),placeholder:""},null,8,["modelValue"])])),_:1}),v(s,{label:"Index",prop:"indexes"},{default:H((()=>[(y(!0),x(Y,null,h(e.formData.indexes,((e,a)=>(y(),x(u,{key:a},{default:H((()=>[v(m,{span:6},{default:H((()=>[v(n,{modelValue:e.checked,"onUpdate:modelValue":a=>e.checked=a,label:e.checked},{default:H((()=>[U(j(e.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","label"])])),_:2},1024),v(m,{span:12},{default:H((()=>[v(r,{type:"number",modelValue:e.require_value,"onUpdate:modelValue":a=>e.require_value=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),v(m,{span:6,style:{padding:"0 20px",color:"#aaa"}},{default:H((()=>[e.unit?(y(),x(Y,{key:0},[U(" Unit: "+j(e.unit),1)],64)):k("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),v(s,{label:"Status",prop:"status"},{default:H((()=>[v(f,{modelValue:e.formData.status,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.status=a)},{default:H((()=>[v(i,{label:0},{default:H((()=>[M])),_:1}),v(i,{label:1},{default:H((()=>[C])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(s,{label:"Discovered",prop:"is_discovered"},{default:H((()=>[v(f,{modelValue:e.formData.is_discovered,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.is_discovered=a)},{default:H((()=>[v(i,{label:0},{default:H((()=>[q])),_:1}),v(i,{label:1},{default:H((()=>[I])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(s,{label:"Begin",prop:"begin"},{default:H((()=>[v(p,{modelValue:e.formData.begin,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.begin=a),type:"datetime",format:"YYYY-MM-DD HH:mm:ss",placeholder:"Select Begin Time"},null,8,["modelValue"])])),_:1}),v(s,{label:"End",prop:"end"},{default:H((()=>[v(p,{modelValue:e.formData.end,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.end=a),type:"datetime",format:"YYYY-MM-DD HH:mm:ss",placeholder:"Select End Time"},null,8,["modelValue"])])),_:1}),v(s,{label:"Target User Class",prop:"filters.classes"},{default:H((()=>[v(c,{modelValue:e.formData.filters.classes,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.filters.classes=a)},{default:H((()=>[(y(!0),x(Y,null,h(e.allClasses,((e,a)=>(y(),x(n,{label:a,key:a},{default:H((()=>[U(j(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(s,{label:"Target User Register Time"},{default:H((()=>[v(p,{modelValue:e.formData.filters.register_time_range,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.filters.register_time_range=a),type:"datetimerange",format:"YYYY-MM-DD HH:mm:ss","range-separator":"to","start-placeholder":"Begin","end-placeholder":"End"},null,8,["modelValue"])])),_:1}),v(s,{label:"Description",prop:"description"},{default:H((()=>[v(r,{type:"textarea",modelValue:e.formData.description,"onUpdate:modelValue":a[8]||(a[8]=a=>e.formData.description=a),placeholder:""},null,8,["modelValue"])])),_:1}),v(s,null,{default:H((()=>[v(b,{type:"primary",onClick:a[9]||(a[9]=e=>t.submitAdd())},{default:H((()=>[O])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])}));w.render=S,w.__scopeId="data-v-cb4914c2";export default w;
