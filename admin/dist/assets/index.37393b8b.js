var A=Object.defineProperty,B=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var U=(l,t,e)=>t in l?A(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,T=(l,t)=>{for(var e in t||(t={}))R.call(t,e)&&U(l,e,t[e]);if(S)for(var e of S(t))j.call(t,e)&&U(l,e,t[e]);return l},E=(l,t)=>B(l,P(t));import{B as z,u as N,r as F,o as I,t as L,e as u,y as M,f as _,q as D,w as d,E as x,h as f,k as a,g as Q,A as G,F as H,z as J,l as k}from"./vendor.7b1bb722.js";import{_ as K,a as v}from"./index.77c0ea73.js";import{u as O,r as W,a as X}from"./table.77a09864.js";const Y={name:"UserTable",setup(){const l=z(null),t=N(),e=O();let s=F({classes:[]});I(()=>{v.listClass().then(function(o){s.classes=o.data}),c()});const c=async()=>{e.loading=!0;let o=await v.listUser(e.query);W(o,e),e.loading=!1},V=()=>{t.push({name:"user-form"})},m=o=>{t.push({name:"user-form",query:{id:o}})},i=async o=>{let n=await v.deleteExam(o);x.success(n.msg),e.query.page=1,await c()},h=o=>{e.multipleSelection=o},b=o=>{e.query.page=o,c()},p=o=>{X(o,e),c()},g=()=>{e.query.id="",e.query.username="",e.query.email="",e.query.class="",e.query.sort_field="",e.query.sort_type=""},r=o=>{t.push({name:"user-detail",query:{id:o}})},y=(o,n)=>o.class_text,C=(o,n)=>o.uploaded_text,q=(o,n)=>o.downloaded_text;return E(T({},L(e)),{multipleTable:l,extraData:s,handleSelectionChange:h,handleAdd:V,handleEdit:m,handleDelete:i,handleDetail:r,fetchTableData:c,changePage:b,handleSortChange:p,formatColumnClass:y,formatColumnUploaded:C,formatColumnDownloaded:q,handleReset:g})}},Z={class:"nexus-table-header"},$={class:"left"},ee=k("Query"),ae=k("Reset"),le={class:"right"},te=k("Add"),oe=["onClick"];function ne(l,t,e,s,c,V){const m=u("el-input"),i=u("el-form-item"),h=u("el-option"),b=u("el-select"),p=u("el-button"),g=u("el-form"),r=u("el-table-column"),y=u("el-table"),C=u("el-pagination"),q=u("el-card"),o=M("loading");return _(),D(q,null,{header:d(()=>[f("div",Z,[f("div",$,[a(g,{inline:!0,model:l.query},{default:d(()=>[a(i,{label:""},{default:d(()=>[a(m,{placeholder:"ID",modelValue:l.query.id,"onUpdate:modelValue":t[0]||(t[0]=n=>l.query.id=n)},null,8,["modelValue"])]),_:1}),a(i,{label:""},{default:d(()=>[a(m,{placeholder:"Username",modelValue:l.query.username,"onUpdate:modelValue":t[1]||(t[1]=n=>l.query.username=n)},null,8,["modelValue"])]),_:1}),a(i,{label:""},{default:d(()=>[a(m,{placeholder:"Email",modelValue:l.query.email,"onUpdate:modelValue":t[2]||(t[2]=n=>l.query.email=n)},null,8,["modelValue"])]),_:1}),a(i,{label:""},{default:d(()=>[a(b,{modelValue:l.query.class,"onUpdate:modelValue":t[3]||(t[3]=n=>l.query.class=n),filterable:"",placeholder:"Class"},{default:d(()=>[(_(!0),Q(H,null,G(s.extraData.classes,(n,w)=>(_(),D(h,{key:w,label:n,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:d(()=>[a(p,{type:"primary",onClick:s.fetchTableData},{default:d(()=>[ee]),_:1},8,["onClick"]),a(p,{type:"primary",onClick:s.handleReset},{default:d(()=>[ae]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),f("div",le,[a(p,{type:"primary",icon:"Plus",onClick:s.handleAdd},{default:d(()=>[te]),_:1},8,["onClick"])])])]),default:d(()=>[J((_(),D(y,{ref:"multipleTable",data:l.tableData,"tooltip-effect":"dark",onSortChange:s.handleSortChange,onSelectionChange:s.handleSelectionChange},{default:d(()=>[a(r,{type:"selection",width:"55"}),a(r,{prop:"id",label:"Id",width:"80",sortable:"custom"}),a(r,{prop:"username",label:"Username",sortable:"custom"}),a(r,{prop:"email",label:"Email",width:"200"}),a(r,{prop:"class",label:"Class",sortable:"custom",width:"120",formatter:s.formatColumnClass},null,8,["formatter"]),a(r,{prop:"uploaded",label:"Uploaded",sortable:"custom",formatter:s.formatColumnUploaded},null,8,["formatter"]),a(r,{prop:"downloaded",label:"Downloaded",sortable:"custom",formatter:s.formatColumnDownloaded},null,8,["formatter"]),a(r,{prop:"bonus",label:"Bonus"}),a(r,{prop:"status",label:"Status",width:"100"}),a(r,{prop:"enabled",label:"Enabled",width:"100"}),a(r,{prop:"last_access",label:"Last access",width:"150"}),a(r,{prop:"added",label:"Added",width:"150"}),a(r,{label:"Action",width:"100"},{default:d(n=>[f("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:w=>s.handleDetail(n.row.id)},"Detail",8,oe)]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[o,l.loading]]),a(C,{background:"",layout:"prev, pager, next",total:l.total,"page-size":l.perPage,"current-page":l.currentPage,onCurrentChange:s.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var ie=K(Y,[["render",ne]]);export{ie as default};
